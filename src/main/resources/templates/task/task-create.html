<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="/partials/partials :: head('Create')"></head>
<body>

<div id="wrapper">
    <nav th:replace="/partials/partials :: nav"></nav>
    <header th:replace="/partials/partials :: header('Create')"></header>

    <main class="container">
        <h2>Create a Task</h2>
        <form th:method="POST" th:action="@{/task/create}" th:object="${task}">

            <div class="form-group mb-3">
                <label for="title">Title</label>
                <input th:field="*{title}" type="text" name="title" id="title" class="form-control">
            </div>

            <div class="form-group mb-3">
                <label for="body">Description</label>
                <textarea th:field="*{description}" name="body" id="body" class="form-control"></textarea>
            </div>

            <!-- Checkbox for scheduling -->
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="scheduleCheckbox" name="scheduleCheckbox">
                <label class="form-check-label" for="scheduleCheckbox">Schedule Task</label>
            </div>

            <!-- DateScheduled input (initially hidden) -->
            <div id="dateScheduledField" style="display: none;">
                <div class="form-group mb-3">
                    <label for="dateScheduled">Scheduled Date</label>
                    <input th:field="*{dateScheduled}" type="date" name="dateScheduled" id="dateScheduled" class="form-control">
                </div>
            </div>

            <!--   for category  -->
            <div class="form-group mb-3">
                <label for="category">Category</label>
                <select th:field="*{category.id}" class="form-control" id="category">
                    <option th:each="category : ${categories}" th:value="${category.id}" th:text="${category.title}"></option>
                </select>
            </div>


            <button class="btn btn-dark" type="submit">Submit</button>
        </form>
    </main>

    <footer th:replace="/partials/partials :: footer"></footer>
</div>

<th:block th:replace="/partials/partials :: scripts"></th:block>

<script>

    const scheduleCheckbox = document.querySelector("#scheduleCheckbox");
    const dateScheduledField = document.querySelector("#dateScheduledField");

    scheduleCheckbox.addEventListener("change", function() {
        if (scheduleCheckbox.checked) {
            dateScheduledField.style.display = "block";
        } else {
            dateScheduledField.style.display = "none";
        }
    });

</script>
</body>
</html>